{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\khamsat\\\\Nouveau dossier\\\\tamreny_project\\\\tamreny\\\\client\\\\src\\\\screens\\\\Orders\\\\Orders.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\"; //Hooks\n\nimport useOrdersHook from \"./hooks/index\"; //Styles\n\nimport \"./style.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Orders = () => {\n  _s();\n\n  const {\n    getOrders,\n    deleteOrder,\n    addOrder,\n    editOrder\n  } = useOrdersHook();\n  const [orders, setOrders] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n  const [orderObj, setOrderObj] = useState({\n    _id: 0,\n    title: \"\",\n    content: \"\",\n    mainImage: \"\",\n    createDate: \"\"\n  });\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n  useEffect(() => {\n    (async () => {\n      const result = await getOrders();\n\n      if (result) {\n        setOrders(result);\n      }\n    })();\n  }, []);\n  useEffect(() => {\n    if (addBoxVisible) setOrderObj({\n      _id: 0,\n      title: \"\",\n      content: \"\",\n      mainImage: \"\",\n      createDate: \"\"\n    });\n  }, [addBoxVisible]);\n\n  const onClickEdit = _id => {\n    const order = orders.find(u => u._id === _id);\n    setOrderObj(order);\n    setEditBoxVisible(true);\n  };\n\n  const onClickDelete = _id => {\n    setOrderObj(orders.find(u => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 / \\u0637\\u0644\\u0628\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataBox, {\n      visible: editBoxVisible,\n      setVisible: setEditBoxVisible,\n      options: {\n        title: `تعديل الطلب رقم ${orderObj._id}`,\n        onSave: async () => {\n          const result = await editOrder(editFormRef);\n\n          if (result) {\n            setOrders(orders.map(u => u._id === result._id ? result : u));\n            setEditBoxVisible(false);\n          }\n        },\n        saveBtn: \"تعديل\",\n        formRef: editFormRef\n      },\n      inputs: [{\n        tag: \"input\",\n        props: {\n          type: \"hidden\",\n          value: orderObj._id,\n          name: \"_id\"\n        }\n      }, {\n        tag: \"select\",\n        label: \"القسم\",\n        props: {\n          value: orderObj.statusId,\n          name: \"statusId\",\n          onChange: e => setOrderObj({ ...orderObj,\n            statusId: e.target.value\n          })\n        },\n        options: [{\n          label: \"لم يتم الدفع\",\n          value: 1\n        }, {\n          label: \"تم الدفع\",\n          value: 2\n        }, {\n          label: \"ملغي\",\n          value: 3\n        }]\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-position\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: \"\\u0637\\u0644\\u0628\\u0627\\u062A \\u0627\\u0644\\u0634\\u0631\\u0627\\u0621\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          actions: {\n            edit: onClickEdit,\n            delete: onClickDelete\n          },\n          headers: [\"#\", \"المشتري\", \" العنوان\", \"المنتج\", \"وسيلة الدفع\", \"حالة الدفع\", \"صورة تأكيد الدفع\", \"تاريخ الطلب\"],\n          data: orders && orders.map(u => {\n            var _u$userId, _u$productId, _u$paymentMethodId;\n\n            return [u._id, (_u$userId = u.userId) === null || _u$userId === void 0 ? void 0 : _u$userId.name, u.address, (_u$productId = u.productId) === null || _u$productId === void 0 ? void 0 : _u$productId.title, (_u$paymentMethodId = u.paymentMethodId) === null || _u$paymentMethodId === void 0 ? void 0 : _u$paymentMethodId.name, u.statusId == 1 ? \"لم يتم الدفع\" : u.statusId == 2 ? \"تم الدفع\" : u.statusId == 3 ? \"ملغي\" : \"غير معروف\", {\n              type: \"img\",\n              src: u.paymentImage\n            }, u.createDate];\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Orders, \"lRmkJ7mu2dHLQF5UiyQ6j1YUDKg=\", false, function () {\n  return [useOrdersHook];\n});\n\n_c = Orders;\nexport default Orders;\n\nvar _c;\n\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"sources":["C:/Users/user/Desktop/khamsat/Nouveau dossier/tamreny_project/tamreny/client/src/screens/Orders/Orders.jsx"],"names":["useState","useEffect","useRef","Helmet","Table","DataBox","SearchBox","DeleteBox","useOrdersHook","Orders","getOrders","deleteOrder","addOrder","editOrder","orders","setOrders","addBoxVisible","setAddBoxVisible","editBoxVisible","setEditBoxVisible","deleteBoxVisible","setDeleteBoxVisible","orderObj","setOrderObj","_id","title","content","mainImage","createDate","addFormRef","editFormRef","result","onClickEdit","order","find","u","onClickDelete","onSave","map","saveBtn","formRef","tag","props","type","value","name","label","statusId","onChange","e","target","options","edit","delete","userId","address","productId","paymentMethodId","src","paymentImage"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\";\n\n//Hooks\nimport useOrdersHook from \"./hooks/index\";\n\n//Styles\nimport \"./style.scss\";\n\nconst Orders = () => {\n  const { getOrders, deleteOrder, addOrder, editOrder } = useOrdersHook();\n\n  const [orders, setOrders] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n\n  const [orderObj, setOrderObj] = useState({\n    _id: 0,\n    title: \"\",\n    content: \"\",\n    mainImage: \"\",\n    createDate: \"\",\n  });\n\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n\n  useEffect(() => {\n    (async () => {\n      const result = await getOrders();\n\n      if (result) {\n        setOrders(result);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (addBoxVisible)\n      setOrderObj({\n        _id: 0,\n        title: \"\",\n        content: \"\",\n        mainImage: \"\",\n        createDate: \"\",\n      });\n  }, [addBoxVisible]);\n\n  const onClickEdit = (_id) => {\n    const order = orders.find((u) => u._id === _id);\n    setOrderObj(order);\n    setEditBoxVisible(true);\n  };\n  const onClickDelete = (_id) => {\n    setOrderObj(orders.find((u) => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>لوحة التحكم / طلبات الشراء</title>\n      </Helmet>\n      {/* <DeleteBox\n        visible={deleteBoxVisible}\n        setVisible={setDeleteBoxVisible}\n        title={`حذف المقالة رقم ${orderObj._id}`}\n        onDelete={async () => {\n          if (await deleteOrder(orderObj._id)) {\n            setOrders(orders.filter((u) => u._id !== orderObj._id));\n            setDeleteBoxVisible(false);\n          }\n        }}\n      /> */}\n      {/* <DataBox\n        visible={addBoxVisible}\n        setVisible={setAddBoxVisible}\n        options={{\n          title: \"اضافة مقال جديد\",\n          onSave: async () => {\n            const order = await addOrder(addFormRef);\n            if (order) {\n              setOrders([...orders, order]);\n              setAddBoxVisible(false);\n            }\n          },\n          btnSave: \"اضافة\",\n          formRef: addFormRef,\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            label: \"عنوان المقال\",\n\n            props: {\n              type: \"text\",\n              name: \"title\",\n              maxLength: 100,\n              placeholder: \"عنوان المقال\",\n              required: true,\n              onChange: (e) =>\n                setOrderObj({ ...orderObj, title: e.target.value }),\n            },\n          },\n          {\n            tag: \"textarea\",\n            label: \"محتوي المقال\",\n            props: {\n              type: \"text\",\n              name: \"content\",\n              placeholder: \"محتوي المقال\",\n              required: true,\n\n              onChange: (e) =>\n                setOrderObj({ ...orderObj, content: e.target.value }),\n            },\n          },\n          {\n            tag: \"input\",\n            label: \"الصورة المصغرة\",\n            props: {\n              type: \"file\",\n              accept: \".jpg, .png, .jpeg\",\n              name: \"mainImage\",\n              placeholder: \"الصورة المصغرة\",\n              required: true,\n\n              onChange: (e) =>\n                setOrderObj({ ...orderObj, mainImage: e.target.files[0] }),\n            },\n          },\n        ]}\n      /> */}\n      <DataBox\n        visible={editBoxVisible}\n        setVisible={setEditBoxVisible}\n        options={{\n          title: `تعديل الطلب رقم ${orderObj._id}`,\n          onSave: async () => {\n            const result = await editOrder(editFormRef);\n            if (result) {\n              setOrders(orders.map((u) => (u._id === result._id ? result : u)));\n              setEditBoxVisible(false);\n            }\n          },\n          saveBtn: \"تعديل\",\n          formRef: editFormRef,\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            props: {\n              type: \"hidden\",\n              value: orderObj._id,\n              name: \"_id\"\n            }\n          },\n          {\n            tag: \"select\",\n            label: \"القسم\",\n            props: {\n              value: orderObj.statusId,\n              name: \"statusId\",\n              onChange: (e) => setOrderObj({ ...orderObj, statusId: e.target.value }),\n            },\n            options: [{\n              label: \"لم يتم الدفع\",\n              value: 1\n            }, {\n              label: \"تم الدفع\",\n              value: 2\n            }, {\n              label: \"ملغي\",\n              value: 3\n            }],\n          },\n        ]}\n      />\n      <div className=\"main-container\">\n        <div className=\"page-position\">\n          <h2>لوحة التحكم</h2>\n          <p>/</p>\n          <h6>طلبات الشراء</h6>\n        </div>\n        <div className=\"container\">\n          {/*<SearchBox />*/}\n          {/* <div className=\"add-new\">\n            <button\n              className=\"btn-add-new\"\n              onClick={() => setAddBoxVisible(true)}\n            >\n              أضف جديد\n            </button>\n          </div> */}\n          <Table\n            actions={{\n              edit: onClickEdit,\n              delete: onClickDelete,\n            }}\n            headers={[\n              \"#\",\n              \"المشتري\",\n              \" العنوان\",\n              \"المنتج\",\n              \"وسيلة الدفع\",\n              \"حالة الدفع\",\n              \"صورة تأكيد الدفع\",\n              \"تاريخ الطلب\",\n            ]}\n            data={\n              orders &&\n              orders.map((u) => [\n                u._id,\n                u.userId?.name,\n                u.address,\n                u.productId?.title,\n                u.paymentMethodId?.name,\n                u.statusId == 1\n                  ? \"لم يتم الدفع\"\n                  : u.statusId == 2\n                  ? \"تم الدفع\"\n                  : u.statusId == 3\n                  ? \"ملغي\"\n                  : \"غير معروف\",\n                { type: \"img\", src: u.paymentImage },\n                u.createDate,\n              ])\n            }\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}