{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\khamsat\\\\Nouveau dossier\\\\tamreny_project\\\\tamreny\\\\client\\\\src\\\\screens\\\\Advertisements\\\\Advertisements.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\";\nimport { Helmet } from \"react-helmet\"; //Hooks\n\nimport useAdvertisementsHook from \"./hooks/index\"; //Styles\n\nimport \"./style.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Advertisements = () => {\n  _s();\n\n  const {\n    getAdvertisement,\n    deleteAdvertisement,\n    addAdvertisement,\n    editAdvertisement\n  } = useAdvertisementsHook();\n  const [advertisements, setAdvertisements] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n  const [advertisementObj, setAdvertisementObj] = useState({\n    _id: 0,\n    image: \"\",\n    link: \"\"\n  });\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n  useEffect(() => {\n    (async () => {\n      const result = await getAdvertisement();\n\n      if (result) {\n        setAdvertisements(result);\n      }\n    })();\n  }, []);\n  useEffect(() => {\n    if (addBoxVisible) setAdvertisementObj({\n      _id: 0,\n      image: \"\",\n      link: \"\"\n    });\n  }, [addBoxVisible]);\n\n  const onClickEdit = _id => {\n    const advertisement = advertisements.find(u => u._id === _id);\n    setAdvertisementObj(advertisement);\n    setEditBoxVisible(true);\n  };\n\n  const onClickDelete = _id => {\n    setAdvertisementObj(advertisements.find(u => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 / \\u0627\\u0644\\u0627\\u0639\\u0644\\u0627\\u0646\\u0627\\u062A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteBox, {\n      visible: deleteBoxVisible,\n      setVisible: setDeleteBoxVisible,\n      title: `حذف الاعلان رقم ${advertisementObj._id}`,\n      onDelete: async () => {\n        if (await deleteAdvertisement(advertisementObj._id)) {\n          setAdvertisements(advertisements.filter(u => u._id !== advertisementObj._id));\n          setDeleteBoxVisible(false);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataBox, {\n      visible: addBoxVisible,\n      setVisible: setAddBoxVisible,\n      options: {\n        title: \"اضافة اعلان جديد\",\n        onSave: async () => {\n          const advertisement = await addAdvertisement(addFormRef);\n\n          if (advertisement) {\n            setAdvertisements([...advertisements, advertisement]);\n            setAddBoxVisible(false);\n          }\n        },\n        btnSave: \"اضافة\",\n        formRef: addFormRef\n      },\n      inputs: [{\n        tag: \"input\",\n        label: \"الصورة المصغرة\",\n        props: {\n          type: \"file\",\n          accept: \".jpg, .png, .jpeg\",\n          name: \"image\",\n          placeholder: \"الصورة المصغرة\",\n          required: true,\n          onChange: e => setAdvertisementObj({ ...advertisementObj,\n            image: e.target.files[0]\n          })\n        }\n      }, {\n        tag: \"input\",\n        label: \"الرابط\",\n        props: {\n          type: \"text\",\n          name: \"link\",\n          placeholder: \"الرابط\",\n          onChange: e => setAdvertisementObj({ ...advertisementObj,\n            link: e.target.value\n          })\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataBox, {\n      visible: editBoxVisible,\n      setVisible: setEditBoxVisible,\n      options: {\n        title: `تعديل الاعلان رقم ${advertisementObj._id}`,\n        onSave: async () => {\n          const result = await editAdvertisement(editFormRef);\n          console.log(\"result\", result);\n\n          if (result) {\n            setAdvertisements(advertisements.map(u => u._id === result._id ? result : u));\n            setEditBoxVisible(false);\n          }\n        },\n        saveBtn: \"تعديل\",\n        formRef: editFormRef\n      },\n      inputs: [{\n        tag: \"input\",\n        props: {\n          type: \"hidden\",\n          value: advertisementObj._id,\n          name: \"_id\"\n        }\n      }, {\n        tag: \"input\",\n        label: \"الصورة المصغرة\",\n        props: {\n          type: \"file\",\n          accept: \".jpg, .png, .jpeg\",\n          placeholder: \"الصورة المصغرة\",\n          name: \"image\",\n          onChange: e => setAdvertisementObj({ ...advertisementObj,\n            image: URL.createObjectURL(e.target.files[0])\n          })\n        }\n      }, {\n        tag: \"input\",\n        label: \"الرابط\",\n        props: {\n          type: \"text\",\n          name: \"link\",\n          value: advertisementObj.link,\n          placeholder: \"الرابط\",\n          onChange: e => setAdvertisementObj({ ...advertisementObj,\n            link: e.target.value\n          })\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-position\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: \"\\u0627\\u0644\\u0627\\u0639\\u0644\\u0627\\u0646\\u0627\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-new\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-add-new\",\n            onClick: () => setAddBoxVisible(true),\n            children: \"\\u0623\\u0636\\u0641 \\u062C\\u062F\\u064A\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          actions: {\n            edit: onClickEdit,\n            delete: onClickDelete\n          },\n          headers: [\"#\", \"صورة الاعلان\", \"الرابط\"],\n          data: advertisements && advertisements.map(u => [u._id, {\n            type: \"img\",\n            src: u.image\n          }, u.link || \"\"])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Advertisements, \"PUrLRPVCRau4D7uFcEDDjK3eD9A=\", false, function () {\n  return [useAdvertisementsHook];\n});\n\n_c = Advertisements;\nexport default Advertisements;\n\nvar _c;\n\n$RefreshReg$(_c, \"Advertisements\");","map":{"version":3,"sources":["C:/Users/user/Desktop/khamsat/Nouveau dossier/tamreny_project/tamreny/client/src/screens/Advertisements/Advertisements.jsx"],"names":["useState","useEffect","useRef","Table","DataBox","SearchBox","DeleteBox","Helmet","useAdvertisementsHook","Advertisements","getAdvertisement","deleteAdvertisement","addAdvertisement","editAdvertisement","advertisements","setAdvertisements","addBoxVisible","setAddBoxVisible","editBoxVisible","setEditBoxVisible","deleteBoxVisible","setDeleteBoxVisible","advertisementObj","setAdvertisementObj","_id","image","link","addFormRef","editFormRef","result","onClickEdit","advertisement","find","u","onClickDelete","filter","title","onSave","btnSave","formRef","tag","label","props","type","accept","name","placeholder","required","onChange","e","target","files","value","console","log","map","saveBtn","URL","createObjectURL","edit","delete","src"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,SAASC,KAAT,EAAgBC,OAAhB,EAAyBC,SAAzB,EAAoCC,SAApC,QAAqD,kBAArD;AACA,SAAQC,MAAR,QAAqB,cAArB,C,CAEA;;AACA,OAAOC,qBAAP,MAAkC,eAAlC,C,CAEA;;AACA,OAAO,cAAP;;;;AAEA,MAAMC,cAAc,GAAG,MAAM;AAAA;;AAC3B,QAAM;AACJC,IAAAA,gBADI;AAEJC,IAAAA,mBAFI;AAGJC,IAAAA,gBAHI;AAIJC,IAAAA;AAJI,MAKFL,qBAAqB,EALzB;AAOA,QAAM,CAACM,cAAD,EAAiBC,iBAAjB,IAAsCf,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACgB,aAAD,EAAgBC,gBAAhB,IAAoCjB,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACkB,cAAD,EAAiBC,iBAAjB,IAAsCnB,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM,CAACoB,gBAAD,EAAmBC,mBAAnB,IAA0CrB,QAAQ,CAAC,KAAD,CAAxD;AAEA,QAAM,CAACsB,gBAAD,EAAmBC,mBAAnB,IAA0CvB,QAAQ,CAAC;AACvDwB,IAAAA,GAAG,EAAE,CADkD;AAEvDC,IAAAA,KAAK,EAAE,EAFgD;AAGvDC,IAAAA,IAAI,EAAE;AAHiD,GAAD,CAAxD;AAMA,QAAMC,UAAU,GAAGzB,MAAM,CAAC,IAAD,CAAzB;AACA,QAAM0B,WAAW,GAAG1B,MAAM,CAAC,IAAD,CAA1B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAY;AACX,YAAM4B,MAAM,GAAG,MAAMnB,gBAAgB,EAArC;;AAEA,UAAImB,MAAJ,EAAY;AACVd,QAAAA,iBAAiB,CAACc,MAAD,CAAjB;AACD;AACF,KAND;AAOD,GARQ,EAQN,EARM,CAAT;AAUA5B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIe,aAAJ,EACEO,mBAAmB,CAAC;AAClBC,MAAAA,GAAG,EAAE,CADa;AAElBC,MAAAA,KAAK,EAAE,EAFW;AAGlBC,MAAAA,IAAI,EAAE;AAHY,KAAD,CAAnB;AAKH,GAPQ,EAON,CAACV,aAAD,CAPM,CAAT;;AASA,QAAMc,WAAW,GAAGN,GAAG,IAAI;AACzB,UAAMO,aAAa,GAAGjB,cAAc,CAACkB,IAAf,CAAoBC,CAAC,IAAIA,CAAC,CAACT,GAAF,KAAUA,GAAnC,CAAtB;AACAD,IAAAA,mBAAmB,CAACQ,aAAD,CAAnB;AACAZ,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACD,GAJD;;AAKA,QAAMe,aAAa,GAAGV,GAAG,IAAI;AAC3BD,IAAAA,mBAAmB,CAACT,cAAc,CAACkB,IAAf,CAAoBC,CAAC,IAAIA,CAAC,CAACT,GAAF,KAAUA,GAAnC,CAAD,CAAnB;AACAH,IAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD,GAHD;;AAKA,sBACE;AAAA,4BACE,QAAC,MAAD;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE,QAAC,SAAD;AACE,MAAA,OAAO,EAAED,gBADX;AAEE,MAAA,UAAU,EAAEC,mBAFd;AAGE,MAAA,KAAK,EAAG,mBAAkBC,gBAAgB,CAACE,GAAI,EAHjD;AAIE,MAAA,QAAQ,EAAE,YAAY;AACpB,YAAI,MAAMb,mBAAmB,CAACW,gBAAgB,CAACE,GAAlB,CAA7B,EAAqD;AACnDT,UAAAA,iBAAiB,CAACD,cAAc,CAACqB,MAAf,CAAsBF,CAAC,IAAIA,CAAC,CAACT,GAAF,KAAUF,gBAAgB,CAACE,GAAtD,CAAD,CAAjB;AACAH,UAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACD;AACF;AATH;AAAA;AAAA;AAAA;AAAA,YAJF,eAeE,QAAC,OAAD;AACE,MAAA,OAAO,EAAEL,aADX;AAEE,MAAA,UAAU,EAAEC,gBAFd;AAGE,MAAA,OAAO,EAAE;AACPmB,QAAAA,KAAK,EAAE,kBADA;AAEPC,QAAAA,MAAM,EAAE,YAAY;AAClB,gBAAMN,aAAa,GAAG,MAAMnB,gBAAgB,CAACe,UAAD,CAA5C;;AAEA,cAAII,aAAJ,EAAmB;AACjBhB,YAAAA,iBAAiB,CAAC,CAAC,GAAGD,cAAJ,EAAoBiB,aAApB,CAAD,CAAjB;AACAd,YAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD;AACF,SATM;AAUPqB,QAAAA,OAAO,EAAE,OAVF;AAWPC,QAAAA,OAAO,EAAEZ;AAXF,OAHX;AAgBE,MAAA,MAAM,EAAE,CACN;AACEa,QAAAA,GAAG,EAAE,OADP;AAEEC,QAAAA,KAAK,EAAE,gBAFT;AAGEC,QAAAA,KAAK,EAAE;AACLC,UAAAA,IAAI,EAAE,MADD;AAELC,UAAAA,MAAM,EAAE,mBAFH;AAGLC,UAAAA,IAAI,EAAE,OAHD;AAILC,UAAAA,WAAW,EAAE,gBAJR;AAKLC,UAAAA,QAAQ,EAAE,IALL;AAOLC,UAAAA,QAAQ,EAAEC,CAAC,IACT1B,mBAAmB,CAAC,EAAE,GAAGD,gBAAL;AAAuBG,YAAAA,KAAK,EAAEwB,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf;AAA9B,WAAD;AARhB;AAHT,OADM,EAeN;AACEX,QAAAA,GAAG,EAAE,OADP;AAEEC,QAAAA,KAAK,EAAE,QAFT;AAIEC,QAAAA,KAAK,EAAE;AACLC,UAAAA,IAAI,EAAE,MADD;AAELE,UAAAA,IAAI,EAAE,MAFD;AAGLC,UAAAA,WAAW,EAAE,QAHR;AAILE,UAAAA,QAAQ,EAAGC,CAAD,IACV1B,mBAAmB,CAAC,EAAE,GAAGD,gBAAL;AAAuBI,YAAAA,IAAI,EAAEuB,CAAC,CAACC,MAAF,CAASE;AAAtC,WAAD;AALd;AAJT,OAfM;AAhBV;AAAA;AAAA;AAAA;AAAA,YAfF,eA4DE,QAAC,OAAD;AACE,MAAA,OAAO,EAAElC,cADX;AAEE,MAAA,UAAU,EAAEC,iBAFd;AAGE,MAAA,OAAO,EAAE;AACPiB,QAAAA,KAAK,EAAG,qBAAoBd,gBAAgB,CAACE,GAAI,EAD1C;AAEPa,QAAAA,MAAM,EAAE,YAAY;AAClB,gBAAMR,MAAM,GAAG,MAAMhB,iBAAiB,CAACe,WAAD,CAAtC;AACAyB,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBzB,MAAtB;;AACA,cAAIA,MAAJ,EAAY;AACVd,YAAAA,iBAAiB,CACfD,cAAc,CAACyC,GAAf,CAAmBtB,CAAC,IAAKA,CAAC,CAACT,GAAF,KAAUK,MAAM,CAACL,GAAjB,GAAuBK,MAAvB,GAAgCI,CAAzD,CADe,CAAjB;AAGAd,YAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD;AACF,SAXM;AAYPqC,QAAAA,OAAO,EAAE,OAZF;AAaPjB,QAAAA,OAAO,EAAEX;AAbF,OAHX;AAkBE,MAAA,MAAM,EAAE,CACN;AACEY,QAAAA,GAAG,EAAE,OADP;AAEEE,QAAAA,KAAK,EAAE;AACLC,UAAAA,IAAI,EAAE,QADD;AAELS,UAAAA,KAAK,EAAE9B,gBAAgB,CAACE,GAFnB;AAGLqB,UAAAA,IAAI,EAAE;AAHD;AAFT,OADM,EASN;AACEL,QAAAA,GAAG,EAAE,OADP;AAEEC,QAAAA,KAAK,EAAE,gBAFT;AAGEC,QAAAA,KAAK,EAAE;AACLC,UAAAA,IAAI,EAAE,MADD;AAELC,UAAAA,MAAM,EAAE,mBAFH;AAGLE,UAAAA,WAAW,EAAE,gBAHR;AAILD,UAAAA,IAAI,EAAE,OAJD;AAKLG,UAAAA,QAAQ,EAAEC,CAAC,IACT1B,mBAAmB,CAAC,EAClB,GAAGD,gBADe;AAElBG,YAAAA,KAAK,EAAEgC,GAAG,CAACC,eAAJ,CAAoBT,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB;AAFW,WAAD;AANhB;AAHT,OATM,EAwBN;AACEX,QAAAA,GAAG,EAAE,OADP;AAEEC,QAAAA,KAAK,EAAE,QAFT;AAIEC,QAAAA,KAAK,EAAE;AACLC,UAAAA,IAAI,EAAE,MADD;AAELE,UAAAA,IAAI,EAAE,MAFD;AAGLO,UAAAA,KAAK,EAAE9B,gBAAgB,CAACI,IAHnB;AAILoB,UAAAA,WAAW,EAAE,QAJR;AAKLE,UAAAA,QAAQ,EAAGC,CAAD,IACV1B,mBAAmB,CAAC,EAAE,GAAGD,gBAAL;AAAuBI,YAAAA,IAAI,EAAEuB,CAAC,CAACC,MAAF,CAASE;AAAtC,WAAD;AANd;AAJT,OAxBM;AAlBV;AAAA;AAAA;AAAA;AAAA,YA5DF,eAqHE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCAEE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA,iCACE;AACE,YAAA,SAAS,EAAC,aADZ;AAEE,YAAA,OAAO,EAAE,MAAMnC,gBAAgB,CAAC,IAAD,CAFjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF,eAUE,QAAC,KAAD;AACE,UAAA,OAAO,EAAE;AACP0C,YAAAA,IAAI,EAAE7B,WADC;AAEP8B,YAAAA,MAAM,EAAE1B;AAFD,WADX;AAKE,UAAA,OAAO,EAAE,CACP,GADO,EAEP,cAFO,EAGP,QAHO,CALX;AAUE,UAAA,IAAI,EACFpB,cAAc,IACdA,cAAc,CAACyC,GAAf,CAAmBtB,CAAC,IAAI,CACtBA,CAAC,CAACT,GADoB,EAEtB;AAAEmB,YAAAA,IAAI,EAAE,KAAR;AAAekB,YAAAA,GAAG,EAAE5B,CAAC,CAACR;AAAtB,WAFsB,EAGtBQ,CAAC,CAACP,IAAF,IAAU,EAHY,CAAxB;AAZJ;AAAA;AAAA;AAAA;AAAA,gBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YArHF;AAAA,kBADF;AA6JD,CAhND;;GAAMjB,c;UAMAD,qB;;;KANAC,c;AAkNN,eAAeA,cAAf","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\";\nimport {Helmet} from \"react-helmet\";\n\n//Hooks\nimport useAdvertisementsHook from \"./hooks/index\";\n\n//Styles\nimport \"./style.scss\";\n\nconst Advertisements = () => {\n  const {\n    getAdvertisement,\n    deleteAdvertisement,\n    addAdvertisement,\n    editAdvertisement\n  } = useAdvertisementsHook();\n\n  const [advertisements, setAdvertisements] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n\n  const [advertisementObj, setAdvertisementObj] = useState({\n    _id: 0,\n    image: \"\",\n    link: \"\"\n  });\n\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n\n  useEffect(() => {\n    (async () => {\n      const result = await getAdvertisement();\n\n      if (result) {\n        setAdvertisements(result);\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (addBoxVisible)\n      setAdvertisementObj({\n        _id: 0,\n        image: \"\",\n        link: \"\"\n      });\n  }, [addBoxVisible]);\n\n  const onClickEdit = _id => {\n    const advertisement = advertisements.find(u => u._id === _id);\n    setAdvertisementObj(advertisement);\n    setEditBoxVisible(true);\n  };\n  const onClickDelete = _id => {\n    setAdvertisementObj(advertisements.find(u => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>لوحة التحكم / الاعلانات</title>\n      </Helmet>\n      <DeleteBox\n        visible={deleteBoxVisible}\n        setVisible={setDeleteBoxVisible}\n        title={`حذف الاعلان رقم ${advertisementObj._id}`}\n        onDelete={async () => {\n          if (await deleteAdvertisement(advertisementObj._id)) {\n            setAdvertisements(advertisements.filter(u => u._id !== advertisementObj._id));\n            setDeleteBoxVisible(false);\n          }\n        }}\n      />\n      <DataBox\n        visible={addBoxVisible}\n        setVisible={setAddBoxVisible}\n        options={{\n          title: \"اضافة اعلان جديد\",\n          onSave: async () => {\n            const advertisement = await addAdvertisement(addFormRef);\n\n            if (advertisement) {\n              setAdvertisements([...advertisements, advertisement]);\n              setAddBoxVisible(false);\n            }\n          },\n          btnSave: \"اضافة\",\n          formRef: addFormRef\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            label: \"الصورة المصغرة\",\n            props: {\n              type: \"file\",\n              accept: \".jpg, .png, .jpeg\",\n              name: \"image\",\n              placeholder: \"الصورة المصغرة\",\n              required: true,\n\n              onChange: e =>\n                setAdvertisementObj({ ...advertisementObj, image: e.target.files[0] })\n            }\n          },\n          {\n            tag: \"input\",\n            label: \"الرابط\",\n\n            props: {\n              type: \"text\",\n              name: \"link\",\n              placeholder: \"الرابط\",\n              onChange: (e) =>\n              setAdvertisementObj({ ...advertisementObj, link: e.target.value }),\n            },\n          },\n        ]}\n      />\n      <DataBox\n        visible={editBoxVisible}\n        setVisible={setEditBoxVisible}\n        options={{\n          title: `تعديل الاعلان رقم ${advertisementObj._id}`,\n          onSave: async () => {\n            const result = await editAdvertisement(editFormRef);\n            console.log(\"result\", result)\n            if (result) {\n              setAdvertisements(\n                advertisements.map(u => (u._id === result._id ? result : u))\n              );\n              setEditBoxVisible(false);\n            }\n          },\n          saveBtn: \"تعديل\",\n          formRef: editFormRef\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            props: {\n              type: \"hidden\",\n              value: advertisementObj._id,\n              name: \"_id\",\n            },\n          },\n          {\n            tag: \"input\",\n            label: \"الصورة المصغرة\",\n            props: {\n              type: \"file\",\n              accept: \".jpg, .png, .jpeg\",\n              placeholder: \"الصورة المصغرة\",\n              name: \"image\",\n              onChange: e =>\n                setAdvertisementObj({\n                  ...advertisementObj,\n                  image: URL.createObjectURL(e.target.files[0])\n                })\n            }\n          },\n          {\n            tag: \"input\",\n            label: \"الرابط\",\n\n            props: {\n              type: \"text\",\n              name: \"link\",\n              value: advertisementObj.link,\n              placeholder: \"الرابط\",\n              onChange: (e) =>\n              setAdvertisementObj({ ...advertisementObj, link: e.target.value }),\n            },\n          },\n        ]}\n      />\n      <div className=\"main-container\">\n        <div className=\"page-position\">\n          <h2>لوحة التحكم</h2>\n          <p>/</p>\n          <h6>الاعلانات</h6>\n        </div>\n        <div className=\"container\">\n          {/* <SearchBox /> */}\n          <div className=\"add-new\">\n            <button\n              className=\"btn-add-new\"\n              onClick={() => setAddBoxVisible(true)}\n            >\n              أضف جديد\n            </button>\n          </div>\n          <Table\n            actions={{\n              edit: onClickEdit,\n              delete: onClickDelete\n            }}\n            headers={[\n              \"#\",\n              \"صورة الاعلان\",\n              \"الرابط\"\n            ]}\n            data={\n              advertisements &&\n              advertisements.map(u => [\n                u._id,\n                { type: \"img\", src: u.image },\n                u.link || \"\"\n              ])\n            }\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Advertisements;\n"]},"metadata":{},"sourceType":"module"}