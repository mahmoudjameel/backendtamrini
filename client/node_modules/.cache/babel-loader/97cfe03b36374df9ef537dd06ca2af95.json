{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\khamsat\\\\Nouveau dossier\\\\tamreny_project\\\\tamreny\\\\client\\\\src\\\\screens\\\\ImageExercises\\\\ImageExercises.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\"; //Hooks\n\nimport useImageExercisesHook from \"./hooks/index\"; //Styles\n\nimport \"./style.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ImageExercises = () => {\n  _s();\n\n  var _imageExerciseObj$cat;\n\n  const {\n    getImageExercises,\n    deleteImageExercise,\n    addImageExercise,\n    editImageExercise,\n    getCategories\n  } = useImageExercisesHook();\n  const [imageExercises, setImageExercises] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n  const [imageExerciseObj, setImageExerciseObj] = useState({\n    _id: 0,\n    title: \"\",\n    description: \"\",\n    images: [],\n    createDate: \"\",\n    categoryId: \"\"\n  });\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n  useEffect(() => {\n    (async () => {\n      const result = await getImageExercises();\n\n      if (result) {\n        setImageExercises(result);\n      }\n\n      const catResult = await getCategories();\n\n      if (catResult) {\n        setCategories(catResult.map(category => ({\n          label: category.name,\n          value: category._id\n        })));\n      }\n    })();\n  }, []);\n  useEffect(() => {\n    if (addBoxVisible) setImageExerciseObj({\n      _id: 0,\n      title: \"\",\n      description: \"\",\n      images: [],\n      createDate: \"\",\n      categoryId: \"\"\n    });\n  }, [addBoxVisible]);\n\n  const onClickEdit = _id => {\n    const imageExercise = imageExercises.find(u => u._id === _id);\n    setImageExerciseObj(imageExercise);\n    setEditBoxVisible(true);\n  };\n\n  const onClickDelete = _id => {\n    setImageExerciseObj(imageExercises.find(u => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 / \\u062A\\u0645\\u0627\\u0631\\u064A\\u0646 \\u0631\\u064A\\u0627\\u0636\\u064A\\u0629 (\\u0635\\u0648\\u0631)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteBox, {\n      visible: deleteBoxVisible,\n      setVisible: setDeleteBoxVisible,\n      title: `حذف التمرين رقم ${imageExerciseObj._id}`,\n      onDelete: async () => {\n        if (await deleteImageExercise(imageExerciseObj._id)) {\n          setImageExercises(imageExercises.filter(u => u._id !== imageExerciseObj._id));\n          setDeleteBoxVisible(false);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataBox, {\n      visible: addBoxVisible,\n      setVisible: setAddBoxVisible,\n      options: {\n        title: \"اضافة تمرين جديد\",\n        onSave: async () => {\n          const imageExercise = await addImageExercise(addFormRef);\n\n          if (imageExercise) {\n            setImageExercises([...imageExercises, imageExercise]);\n            setAddBoxVisible(false);\n          }\n        },\n        btnSave: \"اضافة\",\n        formRef: addFormRef\n      },\n      inputs: [{\n        tag: \"input\",\n        label: \"عنوان التمرين\",\n        props: {\n          type: \"text\",\n          name: \"title\",\n          maxLength: 100,\n          placeholder: \"عنوان التمرين\",\n          required: true,\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            title: e.target.value\n          })\n        }\n      }, {\n        tag: \"select\",\n        label: \"القسم\",\n        props: {\n          name: \"categoryId\",\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            categoryId: e.target.value\n          })\n        },\n        options: categories\n      }, {\n        tag: \"textarea\",\n        label: \"محتوي التمرين\",\n        props: {\n          type: \"text\",\n          name: \"description\",\n          placeholder: \"محتوي التمرين\",\n          required: true,\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            description: e.target.value\n          })\n        }\n      }, {\n        tag: \"input\",\n        label: \"الصور\",\n        props: {\n          type: \"file\",\n          accept: \".jpg, .png, .jpeg\",\n          name: \"images\",\n          placeholder: \"الصور\",\n          multiple: true,\n          required: true,\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            images: e.target.files\n          })\n        }\n      }, {\n        tag: \"input\",\n        props: {\n          name: \"type\",\n          type: \"hidden\",\n          value: 1\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataBox, {\n      visible: editBoxVisible,\n      setVisible: setEditBoxVisible,\n      options: {\n        title: `تعديل التمرين رقم ${imageExerciseObj._id}`,\n        onSave: async () => {\n          const result = await editImageExercise(editFormRef);\n\n          if (result) {\n            setImageExercises(imageExercises.map(u => u._id === result._id ? result : u));\n            setEditBoxVisible(false);\n          }\n        },\n        saveBtn: \"تعديل\",\n        formRef: editFormRef\n      },\n      inputs: [{\n        tag: \"input\",\n        props: {\n          type: \"hidden\",\n          value: imageExerciseObj._id,\n          name: \"_id\"\n        }\n      }, {\n        tag: \"input\",\n        label: \"عنوان التمرين\",\n        props: {\n          type: \"text\",\n          value: imageExerciseObj.title,\n          name: \"title\",\n          placeholder: \"عنوان التمرين\",\n          required: true,\n          maxLength: 100,\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            title: e.target.value\n          })\n        }\n      }, {\n        tag: \"select\",\n        label: \"القسم\",\n        props: {\n          value: imageExerciseObj === null || imageExerciseObj === void 0 ? void 0 : (_imageExerciseObj$cat = imageExerciseObj.categoryId) === null || _imageExerciseObj$cat === void 0 ? void 0 : _imageExerciseObj$cat._id,\n          name: \"categoryId\",\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            categoryId: e.target.value\n          })\n        },\n        options: categories\n      }, {\n        tag: \"textarea\",\n        label: \"محتوي التمرين\",\n        props: {\n          type: \"text\",\n          value: imageExerciseObj.description,\n          name: \"description\",\n          placeholder: \"محتوي التمرين\",\n          required: true,\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            description: e.target.value\n          })\n        }\n      }, {\n        tag: \"input\",\n        label: \"الصور\",\n        props: {\n          type: \"file\",\n          accept: \".jpg, .png, .jpeg\",\n          multiple: true,\n          placeholder: \"الصور\",\n          name: \"images\",\n          onChange: e => setImageExerciseObj({ ...imageExerciseObj,\n            images: e.target.files\n          })\n        }\n      }, {\n        tag: \"input\",\n        props: {\n          name: \"type\",\n          type: \"hidden\",\n          value: 1\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-position\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: \"\\u062A\\u0645\\u0627\\u0631\\u064A\\u0646 \\u0631\\u064A\\u0627\\u0636\\u064A\\u0629 (\\u0635\\u0648\\u0631)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-new\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-add-new\",\n            onClick: () => setAddBoxVisible(true),\n            children: \"\\u0623\\u0636\\u0641 \\u062C\\u062F\\u064A\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          actions: {\n            edit: onClickEdit,\n            delete: onClickDelete\n          },\n          headers: [\"#\", \"الصور\", \"العنوان\", \"القسم\", \"محتوي التمرينة\", \"تاريخ الإضافة\"],\n          data: imageExercises && imageExercises.map(u => {\n            var _u$categoryId;\n\n            return [u._id, {\n              type: \"slider\",\n              images: u.images\n            }, u.title, (_u$categoryId = u.categoryId) === null || _u$categoryId === void 0 ? void 0 : _u$categoryId.name, u.description, u.createDate];\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ImageExercises, \"rsONnM74Dd0FJIkSpdYoNmCwXl4=\", false, function () {\n  return [useImageExercisesHook];\n});\n\n_c = ImageExercises;\nexport default ImageExercises;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageExercises\");","map":{"version":3,"sources":["C:/Users/user/Desktop/khamsat/Nouveau dossier/tamreny_project/tamreny/client/src/screens/ImageExercises/ImageExercises.jsx"],"names":["useState","useEffect","useRef","Helmet","Table","DataBox","SearchBox","DeleteBox","useImageExercisesHook","ImageExercises","getImageExercises","deleteImageExercise","addImageExercise","editImageExercise","getCategories","imageExercises","setImageExercises","categories","setCategories","addBoxVisible","setAddBoxVisible","editBoxVisible","setEditBoxVisible","deleteBoxVisible","setDeleteBoxVisible","imageExerciseObj","setImageExerciseObj","_id","title","description","images","createDate","categoryId","addFormRef","editFormRef","result","catResult","map","category","label","name","value","onClickEdit","imageExercise","find","u","onClickDelete","filter","onSave","btnSave","formRef","tag","props","type","maxLength","placeholder","required","onChange","e","target","options","accept","multiple","files","saveBtn","edit","delete"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\";\n\n//Hooks\nimport useImageExercisesHook from \"./hooks/index\";\n\n//Styles\nimport \"./style.scss\";\n\nconst ImageExercises = () => {\n  const {\n    getImageExercises,\n    deleteImageExercise,\n    addImageExercise,\n    editImageExercise,\n    getCategories\n  } = useImageExercisesHook();\n\n  const [imageExercises, setImageExercises] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n\n  const [imageExerciseObj, setImageExerciseObj] = useState({\n    _id: 0,\n    title: \"\",\n    description: \"\",\n    images: [],\n    createDate: \"\",\n    categoryId: \"\"\n  });\n\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n\n  useEffect(() => {\n    (async () => {\n      const result = await getImageExercises();\n\n      if (result) {\n        setImageExercises(result);\n      }\n      const catResult = await getCategories();\n      if (catResult) {\n        setCategories(catResult.map(category => ({ label: category.name, value: category._id })))\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (addBoxVisible)\n      setImageExerciseObj({\n        _id: 0,\n        title: \"\",\n        description: \"\",\n        images: [],\n        createDate: \"\",\n        categoryId: \"\"\n      });\n  }, [addBoxVisible]);\n\n  const onClickEdit = (_id) => {\n    const imageExercise = imageExercises.find((u) => u._id === _id);\n    setImageExerciseObj(imageExercise);\n    setEditBoxVisible(true);\n  };\n  const onClickDelete = (_id) => {\n    setImageExerciseObj(imageExercises.find((u) => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>لوحة التحكم / تمارين رياضية (صور)</title> \n      </Helmet>\n      <DeleteBox\n        visible={deleteBoxVisible}\n        setVisible={setDeleteBoxVisible}\n        title={`حذف التمرين رقم ${imageExerciseObj._id}`}\n        onDelete={async () => {\n          if (await deleteImageExercise(imageExerciseObj._id)) {\n            setImageExercises(\n              imageExercises.filter((u) => u._id !== imageExerciseObj._id)\n            );\n            setDeleteBoxVisible(false);\n          }\n        }}\n      />\n      <DataBox\n        visible={addBoxVisible}\n        setVisible={setAddBoxVisible}\n        options={{\n          title: \"اضافة تمرين جديد\",\n          onSave: async () => {\n            const imageExercise = await addImageExercise(addFormRef);\n            if (imageExercise) {\n              setImageExercises([...imageExercises, imageExercise]);\n              setAddBoxVisible(false);\n            }\n          },\n          btnSave: \"اضافة\",\n          formRef: addFormRef,\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            label: \"عنوان التمرين\",\n\n            props: {\n              type: \"text\",\n              name: \"title\",\n              maxLength: 100,\n              placeholder: \"عنوان التمرين\",\n              required: true,\n              onChange: (e) =>\n                setImageExerciseObj({\n                  ...imageExerciseObj,\n                  title: e.target.value,\n                }),\n            },\n          },\n          {\n            tag: \"select\",\n            label: \"القسم\",\n            props: {\n              name: \"categoryId\",\n              onChange: (e) => setImageExerciseObj({ ...imageExerciseObj, categoryId: e.target.value }),\n            },\n            options: categories,\n          },\n          {\n            tag: \"textarea\",\n            label: \"محتوي التمرين\",\n            props: {\n              type: \"text\",\n              name: \"description\",\n              placeholder: \"محتوي التمرين\",\n              required: true,\n\n              onChange: (e) =>\n                setImageExerciseObj({\n                  ...imageExerciseObj,\n                  description: e.target.value,\n                }),\n            },\n          },\n          {\n            tag: \"input\",\n            label: \"الصور\",\n            props: {\n              type: \"file\",\n              accept: \".jpg, .png, .jpeg\",\n              name: \"images\",\n              placeholder: \"الصور\",\n              multiple: true,\n              required: true,\n\n              onChange: (e) =>\n                setImageExerciseObj({\n                  ...imageExerciseObj,\n                  images: e.target.files,\n                }),\n            },\n          },\n          {\n            tag: \"input\",\n            props: {\n              name: \"type\",\n              type: \"hidden\",\n              value: 1,\n            },\n          },\n        ]}\n      />\n      <DataBox\n        visible={editBoxVisible}\n        setVisible={setEditBoxVisible}\n        options={{\n          title: `تعديل التمرين رقم ${imageExerciseObj._id}`,\n          onSave: async () => {\n            const result = await editImageExercise(editFormRef);\n            if (result) {\n              setImageExercises(\n                imageExercises.map((u) => (u._id === result._id ? result : u))\n              );\n              setEditBoxVisible(false);\n            }\n          },\n          saveBtn: \"تعديل\",\n          formRef: editFormRef,\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            props: {\n              type: \"hidden\",\n              value: imageExerciseObj._id,\n              name: \"_id\",\n            },\n          },\n          {\n            tag: \"input\",\n            label: \"عنوان التمرين\",\n            props: {\n              type: \"text\",\n              value: imageExerciseObj.title,\n              name: \"title\",\n              placeholder: \"عنوان التمرين\",\n              required: true,\n              maxLength: 100,\n              onChange: (e) =>\n                setImageExerciseObj({\n                  ...imageExerciseObj,\n                  title: e.target.value,\n                }),\n            },\n          },\n          {\n            tag: \"select\",\n            label: \"القسم\",\n            props: {\n              value: imageExerciseObj?.categoryId?._id,\n              name: \"categoryId\",\n              onChange: (e) => setImageExerciseObj({ ...imageExerciseObj, categoryId: e.target.value }),\n            },\n            options: categories,\n          },\n          {\n            tag: \"textarea\",\n            label: \"محتوي التمرين\",\n            props: {\n              type: \"text\",\n              value: imageExerciseObj.description,\n              name: \"description\",\n              placeholder: \"محتوي التمرين\",\n              required: true,\n              onChange: (e) =>\n                setImageExerciseObj({\n                  ...imageExerciseObj,\n                  description: e.target.value,\n                }),\n            },\n          },\n          {\n            tag: \"input\",\n            label: \"الصور\",\n            props: {\n              type: \"file\",\n              accept: \".jpg, .png, .jpeg\",\n              multiple: true,\n              placeholder: \"الصور\",\n              name: \"images\",\n              onChange: (e) =>\n                setImageExerciseObj({\n                  ...imageExerciseObj,\n                  images: e.target.files,\n                }),\n            },\n          },\n          {\n            tag: \"input\",\n            props: {\n              name: \"type\",\n              type: \"hidden\",\n              value: 1,\n            },\n          },\n        ]}\n      />\n      <div className=\"main-container\">\n        <div className=\"page-position\">\n          <h2>لوحة التحكم</h2>\n          <p>/</p>\n          <h6>تمارين رياضية (صور)</h6>\n        </div>\n        <div className=\"container\">\n          {/*<SearchBox />*/}\n          <div className=\"add-new\">\n            <button\n              className=\"btn-add-new\"\n              onClick={() => setAddBoxVisible(true)}\n            >\n              أضف جديد\n            </button>\n          </div>\n          <Table\n            actions={{\n              edit: onClickEdit,\n              delete: onClickDelete,\n            }}\n            headers={[\n              \"#\",\n              \"الصور\",\n              \"العنوان\",\n              \"القسم\",\n              \"محتوي التمرينة\",\n              \"تاريخ الإضافة\",\n            ]}\n            data={\n              imageExercises &&\n              imageExercises.map((u) => [\n                u._id,\n                { type: \"slider\", images: u.images },\n                u.title,\n                u.categoryId?.name,\n                u.description,\n                u.createDate,\n              ])\n            }\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ImageExercises;\n"]},"metadata":{},"sourceType":"module"}