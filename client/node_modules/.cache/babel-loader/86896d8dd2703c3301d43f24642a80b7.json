{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\khamsat\\\\Nouveau dossier\\\\tamreny_project\\\\tamreny\\\\client\\\\src\\\\screens\\\\Products\\\\Products.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\"; //Hooks\n\nimport useProductsHook from \"./hooks/index\"; //Styles\n\nimport \"./style.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Products = () => {\n  _s();\n\n  var _productObj$categoryI;\n\n  const {\n    getProducts,\n    deleteProduct,\n    addProduct,\n    editProduct,\n    getCategories\n  } = useProductsHook();\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n  const [productObj, setProductObj] = useState({\n    _id: 0,\n    title: \"\",\n    price: \"\",\n    description: \"\",\n    coachBrief: \"\",\n    mainImage: \"\",\n    createDate: \"\",\n    categoryId: \"\"\n  });\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n  useEffect(() => {\n    (async () => {\n      const result = await getProducts();\n\n      if (result) {\n        setProducts(result);\n      }\n\n      const catResult = await getCategories();\n\n      if (catResult) {\n        setCategories(catResult.map(category => ({\n          label: category.title,\n          value: category._id\n        })));\n      }\n    })();\n  }, []);\n  useEffect(() => {\n    if (addBoxVisible) setProductObj({\n      _id: 0,\n      title: \"\",\n      price: \"\",\n      description: \"\",\n      coachBrief: \"\",\n      mainImage: \"\",\n      createDate: \"\",\n      categoryId: \"\"\n    });\n  }, [addBoxVisible]);\n\n  const onClickEdit = _id => {\n    const product = products.find(u => u._id === _id);\n    setProductObj(product);\n    setEditBoxVisible(true);\n  };\n\n  const onClickDelete = _id => {\n    setProductObj(products.find(u => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 / \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteBox, {\n      visible: deleteBoxVisible,\n      setVisible: setDeleteBoxVisible,\n      title: `حذف المنتج رقم ${productObj._id}`,\n      onDelete: async () => {\n        if (await deleteProduct(productObj._id)) {\n          setProducts(products.filter(u => u._id !== productObj._id));\n          setDeleteBoxVisible(false);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataBox, {\n      visible: addBoxVisible,\n      setVisible: setAddBoxVisible,\n      options: {\n        title: \"اضافة منتج جديد\",\n        onSave: async () => {\n          const product = await addProduct(addFormRef);\n          console.log(\"product\", product);\n\n          if (product) {\n            setProducts([...products, product]);\n            setAddBoxVisible(false);\n          }\n        },\n        btnSave: \"اضافة\",\n        formRef: addFormRef\n      },\n      inputs: [{\n        tag: \"input\",\n        label: \"عنوان المنتج\",\n        props: {\n          type: \"text\",\n          name: \"title\",\n          maxLength: 100,\n          placeholder: \"عنوان المنتج\",\n          required: true,\n          onChange: e => setProductObj({ ...productObj,\n            title: e.target.value\n          })\n        }\n      }, {\n        tag: \"textarea\",\n        label: \"وصف المنتج\",\n        props: {\n          type: \"text\",\n          name: \"description\",\n          placeholder: \"وصف المنتج\",\n          required: true,\n          onChange: e => setProductObj({ ...productObj,\n            description: e.target.value\n          })\n        }\n      }, {\n        tag: \"input\",\n        label: \"السعر\",\n        props: {\n          type: \"text\",\n          name: \"price\",\n          placeholder: \"السعر\",\n          required: true,\n          onChange: e => setProductObj({ ...productObj,\n            price: e.target.value\n          })\n        }\n      }, // {\n      //   tag: \"textarea\",\n      //   label: \"نبذة عن الكوتش\",\n      //   props: {\n      //     type: \"text\",\n      //     name: \"coachBrief\",\n      //     placeholder: \"نبذة عن الكوتش\",\n      //     required: true,\n      //     onChange: e =>\n      //       setProductObj({ ...productObj, coachBrief: e.target.value })\n      //   }\n      // },\n      {\n        tag: \"select\",\n        label: \"القسم\",\n        props: {\n          name: \"categoryId\",\n          onChange: e => setProductObj({ ...productObj,\n            categoryId: e.target.value\n          })\n        },\n        options: categories\n      }, {\n        tag: \"input\",\n        label: \"الصورة المصغرة\",\n        props: {\n          type: \"file\",\n          accept: \".jpg, .png, .jpeg\",\n          name: \"mainImage\",\n          placeholder: \"الصورة المصغرة\",\n          required: true,\n          onChange: e => setProductObj({ ...productObj,\n            mainImage: e.target.files[0]\n          })\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataBox, {\n      visible: editBoxVisible,\n      setVisible: setEditBoxVisible,\n      options: {\n        title: `تعديل المستخدم رقم ${productObj._id}`,\n        onSave: async () => {\n          const result = await editProduct(editFormRef);\n\n          if (result) {\n            setProducts(products.map(u => u._id === result._id ? result : u));\n            setEditBoxVisible(false);\n          }\n        },\n        saveBtn: \"تعديل\",\n        formRef: editFormRef\n      },\n      inputs: [{\n        tag: \"input\",\n        props: {\n          type: \"hidden\",\n          value: productObj._id,\n          name: \"_id\"\n        }\n      }, {\n        tag: \"input\",\n        label: \"عنوان المنتج\",\n        props: {\n          type: \"text\",\n          value: productObj.title,\n          name: \"title\",\n          placeholder: \"عنوان المنتج\",\n          required: true,\n          maxLength: 100,\n          onChange: e => setProductObj({ ...productObj,\n            title: e.target.value\n          })\n        }\n      }, {\n        tag: \"textarea\",\n        label: \"وصف المنتج\",\n        props: {\n          type: \"text\",\n          value: productObj.description,\n          name: \"description\",\n          placeholder: \"وصف المنتج\",\n          required: true,\n          onChange: e => setProductObj({ ...productObj,\n            description: e.target.value\n          })\n        }\n      }, {\n        tag: \"input\",\n        label: \"السعر\",\n        props: {\n          type: \"text\",\n          name: \"price\",\n          placeholder: \"السعر\",\n          value: productObj.price,\n          required: true,\n          onChange: e => setProductObj({ ...productObj,\n            price: e.target.value\n          })\n        }\n      }, // {\n      //   tag: \"textarea\",\n      //   label: \"نبذة عن الكوتش\",\n      //   props: {\n      //     type: \"text\",\n      //     name: \"coachBrief\",\n      //     value: productObj.coachBrief,\n      //     placeholder: \"نبذة عن الكوتش\",\n      //     required: true,\n      //     onChange: e =>\n      //       setProductObj({ ...productObj, coachBrief: e.target.value })\n      //   }\n      // },\n      {\n        tag: \"select\",\n        label: \"القسم\",\n        props: {\n          value: productObj === null || productObj === void 0 ? void 0 : (_productObj$categoryI = productObj.categoryId) === null || _productObj$categoryI === void 0 ? void 0 : _productObj$categoryI._id,\n          name: \"categoryId\",\n          onChange: e => setProductObj({ ...productObj,\n            categoryId: e.target.value\n          })\n        },\n        options: categories\n      }, {\n        tag: \"input\",\n        label: \"الصورة المصغرة\",\n        props: {\n          type: \"file\",\n          accept: \".jpg, .png, .jpeg\",\n          placeholder: \"الصورة المصغرة\",\n          name: \"mainImage\",\n          onChange: e => setProductObj({ ...productObj,\n            mainImage: URL.createObjectURL(e.target.files[0])\n          })\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-position\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: \"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\\u0627\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-new\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-add-new\",\n            onClick: () => setAddBoxVisible(true),\n            children: \"\\u0623\\u0636\\u0641 \\u062C\\u062F\\u064A\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          actions: {\n            edit: onClickEdit,\n            delete: onClickDelete\n          },\n          headers: [\"#\", \"صورة المنتج\", \"اسم المنتج\", \"وصف المنتج\", \"السعر\", \"القسم\", \"تاريخ الإضافة\"],\n          data: products && products.map(u => {\n            var _u$categoryId;\n\n            return [u._id, {\n              type: \"img\",\n              src: u.mainImage\n            }, u.title, u.description, u.price, u === null || u === void 0 ? void 0 : (_u$categoryId = u.categoryId) === null || _u$categoryId === void 0 ? void 0 : _u$categoryId.title, u.createDate];\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Products, \"41HUZZySDoUJCCCDJfcZT+JWMSM=\", false, function () {\n  return [useProductsHook];\n});\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["C:/Users/user/Desktop/khamsat/Nouveau dossier/tamreny_project/tamreny/client/src/screens/Products/Products.jsx"],"names":["useState","useEffect","useRef","Helmet","Table","DataBox","SearchBox","DeleteBox","useProductsHook","Products","getProducts","deleteProduct","addProduct","editProduct","getCategories","products","setProducts","categories","setCategories","addBoxVisible","setAddBoxVisible","editBoxVisible","setEditBoxVisible","deleteBoxVisible","setDeleteBoxVisible","productObj","setProductObj","_id","title","price","description","coachBrief","mainImage","createDate","categoryId","addFormRef","editFormRef","result","catResult","map","category","label","value","onClickEdit","product","find","u","onClickDelete","filter","onSave","console","log","btnSave","formRef","tag","props","type","name","maxLength","placeholder","required","onChange","e","target","options","accept","files","saveBtn","URL","createObjectURL","edit","delete","src"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Table, DataBox, SearchBox, DeleteBox } from \"../../components\";\n\n//Hooks\nimport useProductsHook from \"./hooks/index\";\n\n//Styles\nimport \"./style.scss\";\n\nconst Products = () => {\n  const {\n    getProducts,\n    deleteProduct,\n    addProduct,\n    editProduct,\n    getCategories\n  } = useProductsHook();\n\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [addBoxVisible, setAddBoxVisible] = useState(false);\n  const [editBoxVisible, setEditBoxVisible] = useState(false);\n  const [deleteBoxVisible, setDeleteBoxVisible] = useState(false);\n\n  const [productObj, setProductObj] = useState({\n    _id: 0,\n    title: \"\",\n    price: \"\",\n    description: \"\",\n    coachBrief: \"\",\n    mainImage: \"\",\n    createDate: \"\",\n    categoryId: \"\"\n  });\n\n  const addFormRef = useRef(null);\n  const editFormRef = useRef(null);\n\n  useEffect(() => {\n    (async () => {\n      const result = await getProducts();\n      if (result) {\n        setProducts(result);\n      }\n      const catResult = await getCategories();\n      if (catResult) {\n        setCategories(catResult.map(category => ({ label: category.title, value: category._id })))\n      }\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (addBoxVisible)\n      setProductObj({\n        _id: 0,\n        title: \"\",\n        price: \"\",\n        description: \"\",\n        coachBrief: \"\",\n        mainImage: \"\",\n        createDate: \"\",\n        categoryId: \"\"\n      });\n  }, [addBoxVisible]);\n\n  const onClickEdit = _id => {\n    const product = products.find(u => u._id === _id);\n    setProductObj(product);\n    setEditBoxVisible(true);\n  };\n  const onClickDelete = _id => {\n    setProductObj(products.find(u => u._id === _id));\n    setDeleteBoxVisible(true);\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>لوحة التحكم / المنتجات</title>\n      </Helmet>\n      <DeleteBox\n        visible={deleteBoxVisible}\n        setVisible={setDeleteBoxVisible}\n        title={`حذف المنتج رقم ${productObj._id}`}\n        onDelete={async () => {\n          if (await deleteProduct(productObj._id)) {\n            setProducts(products.filter(u => u._id !== productObj._id));\n            setDeleteBoxVisible(false);\n          }\n        }}\n      />\n      <DataBox\n        visible={addBoxVisible}\n        setVisible={setAddBoxVisible}\n        options={{\n          title: \"اضافة منتج جديد\",\n          onSave: async () => {\n            const product = await addProduct(addFormRef);\n            console.log(\"product\", product);\n            if (product) {\n              setProducts([...products, product]);\n              setAddBoxVisible(false);\n            }\n          },\n          btnSave: \"اضافة\",\n          formRef: addFormRef\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            label: \"عنوان المنتج\",\n\n            props: {\n              type: \"text\",\n              name: \"title\",\n              maxLength: 100,\n              placeholder: \"عنوان المنتج\",\n              required: true,\n              onChange: e =>\n                setProductObj({ ...productObj, title: e.target.value })\n            }\n          },\n          {\n            tag: \"textarea\",\n            label: \"وصف المنتج\",\n            props: {\n              type: \"text\",\n              name: \"description\",\n              placeholder: \"وصف المنتج\",\n              required: true,\n\n              onChange: e =>\n                setProductObj({ ...productObj, description: e.target.value })\n            }\n          },\n          {\n            tag: \"input\",\n            label: \"السعر\",\n            props: {\n              type: \"text\",\n              name: \"price\",\n              placeholder: \"السعر\",\n              required: true,\n\n              onChange: e =>\n                setProductObj({ ...productObj, price: e.target.value })\n            }\n          },\n          // {\n          //   tag: \"textarea\",\n          //   label: \"نبذة عن الكوتش\",\n          //   props: {\n          //     type: \"text\",\n          //     name: \"coachBrief\",\n          //     placeholder: \"نبذة عن الكوتش\",\n          //     required: true,\n\n          //     onChange: e =>\n          //       setProductObj({ ...productObj, coachBrief: e.target.value })\n          //   }\n          // },\n          {\n            tag: \"select\",\n            label: \"القسم\",\n            props: {\n              name: \"categoryId\",\n              onChange: (e) => setProductObj({ ...productObj, categoryId: e.target.value }),\n            },\n            options: categories,\n          },\n          {\n            tag: \"input\",\n            label: \"الصورة المصغرة\",\n            props: {\n              type: \"file\",\n              accept: \".jpg, .png, .jpeg\",\n              name: \"mainImage\",\n              placeholder: \"الصورة المصغرة\",\n              required: true,\n\n              onChange: e =>\n                setProductObj({ ...productObj, mainImage: e.target.files[0] })\n            }\n          }\n        ]}\n      />\n      <DataBox\n        visible={editBoxVisible}\n        setVisible={setEditBoxVisible}\n        options={{\n          title: `تعديل المستخدم رقم ${productObj._id}`,\n          onSave: async () => {\n            const result = await editProduct(editFormRef);\n            if (result) {\n              setProducts(\n                products.map(u => (u._id === result._id ? result : u))\n              );\n              setEditBoxVisible(false);\n            }\n          },\n          saveBtn: \"تعديل\",\n          formRef: editFormRef\n        }}\n        inputs={[\n          {\n            tag: \"input\",\n            props: {\n              type: \"hidden\",\n              value: productObj._id,\n              name: \"_id\"\n            }\n          },\n          {\n            tag: \"input\",\n            label: \"عنوان المنتج\",\n            props: {\n              type: \"text\",\n              value: productObj.title,\n              name: \"title\",\n              placeholder: \"عنوان المنتج\",\n              required: true,\n              maxLength: 100,\n              onChange: e =>\n                setProductObj({ ...productObj, title: e.target.value })\n            }\n          },\n          {\n            tag: \"textarea\",\n            label: \"وصف المنتج\",\n            props: {\n              type: \"text\",\n              value: productObj.description,\n              name: \"description\",\n              placeholder: \"وصف المنتج\",\n              required: true,\n              onChange: e =>\n                setProductObj({ ...productObj, description: e.target.value })\n            }\n          },\n          {\n            tag: \"input\",\n            label: \"السعر\",\n            props: {\n              type: \"text\",\n              name: \"price\",\n              placeholder: \"السعر\",\n              value: productObj.price,\n              required: true,\n\n              onChange: e =>\n                setProductObj({ ...productObj, price: e.target.value })\n            }\n          },\n          // {\n          //   tag: \"textarea\",\n          //   label: \"نبذة عن الكوتش\",\n          //   props: {\n          //     type: \"text\",\n          //     name: \"coachBrief\",\n          //     value: productObj.coachBrief,\n          //     placeholder: \"نبذة عن الكوتش\",\n          //     required: true,\n\n          //     onChange: e =>\n          //       setProductObj({ ...productObj, coachBrief: e.target.value })\n          //   }\n          // },\n          {\n            tag: \"select\",\n            label: \"القسم\",\n            props: {\n              value: productObj?.categoryId?._id,\n              name: \"categoryId\",\n              onChange: (e) => setProductObj({ ...productObj, categoryId: e.target.value }),\n            },\n            options: categories,\n          },\n          {\n            tag: \"input\",\n            label: \"الصورة المصغرة\",\n            props: {\n              type: \"file\",\n              accept: \".jpg, .png, .jpeg\",\n              placeholder: \"الصورة المصغرة\",\n              name: \"mainImage\",\n              onChange: e =>\n                setProductObj({\n                  ...productObj,\n                  mainImage: URL.createObjectURL(e.target.files[0])\n                })\n            }\n          }\n        ]}\n      />\n      <div className=\"main-container\">\n        <div className=\"page-position\">\n          <h2>لوحة التحكم</h2>\n          <p>/</p>\n          <h6>المنتجات</h6>\n        </div>\n        <div className=\"container\">\n          {/* <SearchBox /> */}\n          <div className=\"add-new\">\n            <button\n              className=\"btn-add-new\"\n              onClick={() => setAddBoxVisible(true)}\n            >\n              أضف جديد\n            </button>\n          </div>\n          <Table\n            actions={{\n              edit: onClickEdit,\n              delete: onClickDelete\n            }}\n            headers={[\n              \"#\",\n              \"صورة المنتج\",\n              \"اسم المنتج\",\n              \"وصف المنتج\",\n              \"السعر\",\n              \"القسم\",\n              \"تاريخ الإضافة\"\n            ]}\n            data={\n              products &&\n              products.map(u => [\n                u._id,\n                { type: \"img\", src: u.mainImage },\n                u.title,\n                u.description,\n                u.price,\n                u?.categoryId?.title,\n                u.createDate\n              ])\n            }\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}